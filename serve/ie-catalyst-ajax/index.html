<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="en-us" http-equiv="Content-Language" />
    <meta content="The online writing of Anthony Bull" name="description" />
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <title>Anthony Bull &mdash; IE & Catalyst & AJAX</title>
  </head>
  <body>
    <header>
      <h1 id="title">
        The Bull Og
      </h1>
      <h2 id="subtitle">
        Onine since 1994. Offline since 1976.
      </h2>
      <h3>
        See also the <a href="/archive.html" title="Archive">archive</a>
      </h3>
    </header>
    <div id="wrapper">
      <h2 id="intro">An individual post follows.</h2>
<article class="post">
<p>Alright, I've got this web service set up to serve back JSON when a link is clicked.  Working in Firefox 1.5+?  You bet.  IE 6? No.  I ping the web service with the browser and what do I get?</p>

<code>Content-Type image/gif is not supported.</code>

<p>Sure enough in Catalyst, I see the following in the logs:</p>

<code>Could not find a serializer for an empty content type</code>

<p>Am I to understand then that the Accept header of the XMLHttpRequest object in IE uses a default of "image/gif"?!?</p>

<p>Sure enough, I made the following change in my REST controller and the JSON service worked:</p>

<div class="CodeRay">
  <div class="code"><pre>__PACKAGE__-&gt;config(
          serialize =&gt; {
              'stash_key' =&gt; 'rest',
              'map'       =&gt; {
                  'text/xml'           =&gt; 'JSON',
                  'text/x-json'        =&gt; 'JSON',
                  'image/gif'          =&gt; 'JSON',
              },
         }
);</pre></div>
</div>

<time class="signoff" datetime="2008-05-10">
  &mdash;May 10, 2008
</time>
</article>

      <footer id="footer">
        <a href="/" title="Home">Home</a> &bull;
        <a href="/archive.html" title="Archived writing">Archive</a>
      </footer>
    </div>
  </body>
</html>
